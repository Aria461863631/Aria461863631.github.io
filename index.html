<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favico.jpg?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favico.jpg?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="This guy is so lazy that he left nothing">
<meta property="og:type" content="website">
<meta property="og:title" content="Aria">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Aria">
<meta property="og:description" content="This guy is so lazy that he left nothing">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Aria">
<meta name="twitter:description" content="This guy is so lazy that he left nothing">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Aria</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Aria</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">あなたには僕が見えるが?</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/28/SICP/sicp1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aria">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Aria">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/28/SICP/sicp1/" itemprop="url">[SICP ch-1] Building Abstractions with Procedures</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-28T21:52:51+08:00">
                2018-02-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/SICP/" itemprop="url" rel="index">
                    <span itemprop="name">SICP</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/02/28/SICP/sicp1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/02/28/SICP/sicp1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2>SICP ch-1 Building Abstractions with Procedures</h2>
<p>We are about to study the idea of computational process</p>
<p>&lt;br/&gt;</p>
<h3>1.1 The Elements of Programming</h3>
<p>Language combine simple ideas to form complex ideas by three mechanisms</p>
<ol>
<li>primitive expression</li>
<li>means of combination</li>
<li>means of abstraction</li>
</ol>
<p>&lt;br/&gt;</p>
<p>&lt;!-- more --&gt;</p>
<p><strong>1.1.1 Expressions</strong></p>
<ul>
<li>you type an expression, the <strong>interpreter</strong> responds by displaying the result of its <strong>evaluating</strong> that expression ( 486 )</li>
</ul>
<p>Combinations</p>
<ul>
<li>Expressions formed by delimiting a list of expressions within parentheses ( + 137 349 )</li>
<li>operator, operands</li>
</ul>
<p>&lt;br/&gt;</p>
<p><strong>1.1.2 Naming and the Environment</strong></p>
<p>Naming</p>
<ul>
<li>language provides the means of using names ( variable ) to refer to computational objects ( value )</li>
<li>Associating values with symbols</li>
</ul>
<p><strong>Environment</strong></p>
<ul>
<li>The <strong>memory</strong> that interpreter must maintain to <strong>keeps track</strong> of the name-object pairs.  ( ch-3 )</li>
<li>Determine the meaning of the symbols in expressions.</li>
</ul>
<p>&lt;br/&gt;</p>
<p><strong>1.1.3 Evaluating Combinations</strong></p>
<p>Interpreter is itself following a procedure</p>
<ol>
<li><strong>Evaluate</strong> the <strong>subexpressions</strong> of the combination</li>
<li><strong>Apply</strong> the procedure that is the value of the leftmost <strong>subexpression</strong> (the operator) to the arguments that are the values of the other <strong>subexpressions</strong> (the operands).</li>
</ol>
<p>Thus, the evaluation rule is <strong>recursive</strong> in nature.</p>
<p>&lt;br/&gt;</p>
<p><strong>Special Forms</strong></p>
<ul>
<li>Exceptions to the general evaluation rule. ( apply operator to operands )</li>
<li>Each special form has its own evaluation rule.</li>
<li>define, cond, if, and, or,</li>
</ul>
<p>&lt;br/&gt;</p>
<p><strong>1.1.4 Compound Procedures</strong></p>
<p>Procedure definitions</p>
<p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
</pre></td><td class="code"><pre><span class="line">(<span class="name">define</span> (<span class="name">&lt;name&gt;</span> &lt;formal parameters&gt;)</span>
<span class="line">  &lt;body&gt;)</span>
</pre></td></tr></table></figure></p>
<p>&lt;br/&gt;</p>
<p><strong>1.1.5 The Substitution Model for Procedure Application</strong></p>
<p>Evaluate a combination</p>
<ul>
<li>evaluates the elements of the combination</li>
<li>applies the procedure to the arguments</li>
</ul>
<p>&lt;br/&gt;</p>
<p><strong>Substitution Model</strong></p>
<ul>
<li>To <strong>apply</strong> a compound procedure to arguments, <strong>evaluate</strong> the body of he procedure with each formal parameter <strong>replaced</strong> by the corresponding argument.</li>
<li>Typical interpreters <strong>do not</strong> evaluate procedure by substitute values, but using a <strong>local environment</strong> for the formal parameters ( ch-3 )</li>
<li>This model breaks down when we address procedures with &quot;mutable data&quot; ( ch-3 set! )</li>
</ul>
<p>&lt;br/&gt;</p>
<p>Normal Order</p>
<p>fully expand and then reduce (x)</p>
<p><strong>Applicative Order</strong></p>
<p>evaluate the arguments and then apply</p>
<p>&lt;br/&gt;</p>
<p><strong>1.1.6 Conditional Expressions and Predicates</strong></p>
<p><strong>Predicate</strong></p>
<ul>
<li>an expression whose value is interpreted as either true or false.</li>
</ul>
<p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
<span class="line">9</span>
<span class="line">10</span>
<span class="line">11</span>
<span class="line">12</span>
</pre></td><td class="code"><pre><span class="line">(<span class="name">cond</span> (<span class="name">&lt;p1&gt;</span> &lt;e1&gt;)</span>
<span class="line">      (<span class="name">&lt;p2&gt;</span> &lt;e2&gt;)</span>
<span class="line">      ...</span>
<span class="line">      (<span class="name">&lt;pn&gt;</span> &lt;en&gt;))</span>
<span class="line"></span>
<span class="line">(<span class="name">if</span> &lt;predicate&gt;</span>
<span class="line">    &lt;consequent&gt;</span>
<span class="line">    &lt;alternative&gt;)</span>
<span class="line"></span>
<span class="line">(<span class="name">and</span> &lt;e1&gt; ... &lt;en&gt;)</span>
<span class="line">(<span class="name">or</span> &lt;e1&gt; ... &lt;en&gt;)</span>
<span class="line">(<span class="name">not</span> &lt;e&gt;)</span>
</pre></td></tr></table></figure></p>
<p>&lt;br/&gt;</p>
<p><strong>1.1.7 Example: Square Roots by Newton’s Method</strong></p>
<p><strong>1.1.8 Procedures are Black-Box Abstractions</strong></p>
<p>local names</p>
<p>internal definition</p>
<p>scope</p>
<p>&lt;br/&gt;</p>
<h3>1.2 Procedures and the Processes They Generate</h3>
<p><strong>Procedure</strong></p>
<ul>
<li>A <strong>procedure</strong> is a pattern for the local evolution of a computational <strong>process</strong>.</li>
<li>It specifies how each stage of the process is built upon the previous stage.</li>
</ul>
<p>&lt;br/&gt;</p>
<p><strong>1.2.1 Linear Recursion and Iteration</strong></p>
<p>Recursive procedure</p>
<ul>
<li>syntactic fact that the procedure definition refers to the procedure itself</li>
</ul>
<p>Recursive <strong>process</strong></p>
<ul>
<li>The process that characterized by a chain of <strong>deferred</strong> operations</li>
<li>Requires <strong>interpreter</strong> keep track of operations to be performed later on.</li>
</ul>
<p>Iterative process</p>
<ul>
<li>one whose state can be summarized by a fixed number of <strong>state variables</strong>, together with a fixed rule that describes how the state variables should be <strong>updated</strong> as the process moves from state to state and an (optional) end test.</li>
</ul>
<p><strong>Tail Recursive</strong></p>
<ul>
<li>An implementation with the property of:  &quot;An iterative process will be executed in <strong>constant space</strong>, even if it is described by a recursive procedure.&quot;</li>
</ul>
<p>&lt;br/&gt;</p>
<h3>1.3 Formulating Abstractions with Higher-Order Procedures</h3>
<p>Procedures are <strong>abstractions</strong> that describe compound operations</p>
<p>Higher-order procedures</p>
<ul>
<li>procedures that manipulate procedures</li>
</ul>
<p>&lt;br/&gt;</p>
<p><strong>1.3.1 Procedures as Arguments</strong></p>
<p><strong>1.3.2 Constructing Procedures Using lambda</strong></p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
</pre></td><td class="code"><pre><span class="line">(lambda (&lt;formal parameters&gt;)</span>
<span class="line">  &lt;body&gt;)</span>
<span class="line"></span>
<span class="line">(let ((&lt;var1&gt; &lt;exp1&gt;)</span>
<span class="line">      (&lt;var2&gt; &lt;exp2&gt;)</span>
<span class="line">      ...</span>
<span class="line">      (&lt;varn&gt; &lt;expn&gt;))</span>
<span class="line">  &lt;body&gt;)</span>
</pre></td></tr></table></figure></p>
<p>&lt;br/&gt;</p>
<p><strong>1.3.3 Procedures as General Methods</strong></p>
<p>finding roots</p>
<p>finding fixed point</p>
<p><strong>1.3.4 Procedures as Returned Values</strong></p>
<p>return values are themselves procedures</p>
<p>&lt;br/&gt;</p>
<p><strong>Abstractions and first-class procedures</strong></p>
<p>programming languages impose restrictions on the ways in which computational elements can be manipulated</p>
<p>First-class status</p>
<ul>
<li>elements with fewest restrictions</li>
<li>They may be named by variables.</li>
<li>They may be passed as arguments to procedures.</li>
<li>They may be returned as the results of procedures.</li>
<li>They may be included in data structures.</li>
</ul>
<p>Lisp awards <strong>procedures</strong> full first-class status, which poses challenges for efficient implementation, but the resulting gain in expressive power is enormous.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/01/CSAPP/ch-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aria">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Aria">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/01/CSAPP/ch-1/" itemprop="url">[CS:APP-ch1] A Tour of Computer Systems</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-01T20:52:51+08:00">
                2018-01-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSAPP/" itemprop="url" rel="index">
                    <span itemprop="name">CSAPP</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/01/01/CSAPP/ch-1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/01/01/CSAPP/ch-1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2>CS:APP ch-1 A Tour of Computer Sytems</h2>
<p>A computer system consists of hardware and systems software that work together to run application programs.</p>
<p>Tracing the life time of hello program.</p>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
</pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;  </span></span></span>
<span class="line">  </span>
<span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span></span>
<span class="line"><span class="function"></span>&#123;  </span>
<span class="line">        <span class="built_in">printf</span>(<span class="string">"hello world!\n"</span>);  </span>
<span class="line">  </span>
<span class="line">        <span class="keyword">return</span> <span class="number">0</span>;  </span>
<span class="line">&#125;</span>
</pre></td></tr></table></figure></p>
<p>&lt;br/&gt;</p>
<p>&lt;!-- more --&gt;</p>
<h4>1.1 Information Is Bits + Context</h4>
<p>The hello program begins life as a source program ( a sequence of bits, organized in bytes )</p>
<p>Text files</p>
<ul>
<li>files consist exclusively ASCII characters.</li>
</ul>
<p>Binary files</p>
<ul>
<li>all other files</li>
</ul>
<p>All information in a system is represented as a bunch of <strong>bits</strong>.</p>
<p>The only thing that distinguishes different data objects is the <strong>context</strong> in which we view them.</p>
<p>&lt;br/&gt;</p>
<h4>1.2 Programs Are Translated by Other Programs into Different Forms</h4>
<p>In order to run hello.c on the system, the individual C statements must be translated by other programs into a sequence of low-level machine-language instructions.</p>
<p>These instructions are then packaged in a form called an executable object program and stored as a binary disk file.</p>
<p><img src="http://img.blog.csdn.net/20140423174324171" alt=""></p>
<h4>1.3 It Pays to Understand How Compilation Systems Work</h4>
<p>Reasons why need to understand compilation systems</p>
<ul>
<li>Optimizing program performance</li>
</ul>
<ul>
<li>Understanding link-time error</li>
<li>Avoiding security holes</li>
</ul>
<p>&lt;br/&gt;</p>
<h4>1.4 Processors Read and Interpret Instructions Stored in Memory</h4>
<p>To run the executable object file, type <code>./hello</code>  to an applcation program known as a shell</p>
<p><strong>Hardware Organization of a System</strong></p>
<ul>
<li>Buses: transfer words</li>
<li>I/O Devices: system’s connection to the external world, connected to I/O bus by either a controller or an adapter</li>
<li>Main Memory:  temporary storage device that holds both a program and the data it manipulates while the processor is executing the program</li>
<li>Processor: the engine that inter-prets (or executes ) instructions stored in main memory</li>
</ul>
<p><img src="http://img.blog.csdn.net/20140423180155531" alt=""></p>
<p>Running hello</p>
<ul>
<li>Reading command from keyboard</li>
<li>Load file from disk to memory</li>
<li>Write output string from memory to display</li>
</ul>
<p><img src="http://img.blog.csdn.net/20140423180827984" alt=""></p>
<p><img src="http://img.blog.csdn.net/20140423180854531" alt=""></p>
<h4>1.5 Caches Matter</h4>
<p>The machine instruction in the hello program are originally stored on disk</p>
<p>When loaded, opied to main memory</p>
<p>When processor runs, copied into the processor ( register + caches )</p>
<p>deal with processor-memory gap</p>
<p>&lt;br/&gt;</p>
<h4>1.6 Storage Devices Form a Hierarchy</h4>
<p>storage at one level serves as a cache for the next lower level</p>
<p><img src="http://img.blog.csdn.net/20140423181308515" alt=""></p>
<h4>1.7 The Operating System Manages the Hardware</h4>
<p>OS</p>
<ul>
<li>a layer of software interposed between the application program and the hardware</li>
<li>two primitive purpose: (1)protect hardware (2)provide applications with simple and uniform mechanisms for manipulating hardwares</li>
<li>achieve both goals via <strong>abstractions</strong></li>
</ul>
<p><img src="http://img.blog.csdn.net/20140423181431437" alt=""></p>
<p><img src="http://img.blog.csdn.net/20140423181504203" alt=""></p>
<p>Process</p>
<ul>
<li>The operating system's abstraction for a running program</li>
<li>context switching</li>
</ul>
<p>Thread</p>
<p>VIrtual Memory</p>
<ul>
<li>Each process has the same uniform view of memory ( virtual address space )</li>
</ul>
<p><img src="http://img.blog.csdn.net/20140423181937906" alt=""></p>
<p>Files</p>
<ul>
<li>A sequence of bytes, nothing more and nothing less</li>
<li>Every I/O devices is modeled as a file</li>
</ul>
<p>&lt;br/&gt;</p>
<h4>1.8 Systems Communicate with Other Systems Using Networks</h4>
<p><img src="http://img.blog.csdn.net/20140423182125734" alt=""></p>
<h4>1.9 Important Themes</h4>
<p>Amdahl's law: observation of the effectiveness</p>
<p><strong>Concurrency and Parallelism</strong></p>
<p>concurrency</p>
<ul>
<li>a system with multiple, simultaneous activities</li>
</ul>
<p>parallelism</p>
<ul>
<li>use of concurrency to make a system run faster</li>
</ul>
<p>Parrallelism can be exploited at multiple( three ) levels of abstraction in a computer system. ( hight --&gt; low )</p>
<ol>
<li>Thread-level Concurrency: multicore &amp; hyperthreading</li>
<li>Instruction-level Parallelism: pipeling</li>
<li>Single-Instruction, Multiple-Data ( SIMD ) Parallelism</li>
</ol>
<p><strong>The Importance of Abstractions in Computer Systems</strong></p>
<p>Processor side</p>
<ul>
<li>instruction set architecture provides an abstraction of actual processor</li>
</ul>
<p>Operating System side</p>
<ul>
<li>Files as an abstraction of I/O</li>
<li>Virtual Memory as an abstraction of Program Memory</li>
<li>Processes as an abstraction of a Running Program</li>
<li>Virtual Machine as an abstraction of the Entire Computer</li>
</ul>
<p><img src="http://img.blog.csdn.net/20140423182814015" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/29/CSAPP/ch-9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aria">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Aria">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/29/CSAPP/ch-9/" itemprop="url">[CS:APP-ch9] Virtual Memory</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-29T17:43:51+08:00">
                2017-12-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSAPP/" itemprop="url" rel="index">
                    <span itemprop="name">CSAPP</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/12/29/CSAPP/ch-9/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/12/29/CSAPP/ch-9/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2>CS:APP ch-9 Virtual Memory</h2>
<p>Virtual Memory</p>
<ul>
<li>modern systems provide an abstraction of main memory</li>
</ul>
<p>three important capabilities</p>
<ol>
<li>It uses main memory efficiently by treating it as a <strong>cache</strong> for an address space stored on disk, keeping only the active areas in main memory, and transferring data back and forth between disk and memory as needed.</li>
<li>It simplifies memory <strong>management</strong> by providing each process with a uniform address space.</li>
<li>It <strong>protects</strong> the address space of each process from corruption by other processes.</li>
</ol>
<p>&lt;!-- more --&gt;
&lt;br/&gt;</p>
<h4>9.1 Physical and Virtual Addressing</h4>
<p>Main memory organized as an array of M contiguous byte-size cells, each byte has a unique <strong>physical address</strong>.</p>
<p>Physical Addressing: use physical address ( PA ) to access memory</p>
<p>Virtual Addressing: use virtual address ( VA ) and translate to physical address</p>
<p>Addressing Translation: converting a virtual address to a physical one</p>
<p><img src="http://img.blog.csdn.net/20140726024101287" alt=""></p>
<h4>9.2 Address Spaces</h4>
<p>Virtual Address Space</p>
<ul>
<li>CPU generates virtual addresses from an address space of $ N = 2^n $ addresses called the virtual address space  {0 , 1, 2 ,...,N − 1}</li>
</ul>
<p>Physical Address Space</p>
<ul>
<li>A system also has a physical address space that corresponds to the M bytes of physical memory in the system {0 , 1, 2 ,...,M − 1}</li>
</ul>
<p>&lt;br/&gt;</p>
<h4>9.3 VM as a Tool for Caching</h4>
<p>A virtual memory is organized as an array of N contiguous byte-sized cells stored on <strong>disk</strong>. Each byte has a unique virtual address that serves as an index into the array.</p>
<p>VM systems partition the virtual memory into fixed-size blocks call <strong>Virtual Pages ( VP )</strong> as transfer units between <strong>disk</strong> and <strong>main memory</strong>.</p>
<p>Three sets of VP: Unallocated, Cached, Uncached</p>
<p><img src="http://img.blog.csdn.net/20140726024435296" alt=""></p>
<p>DRAM cache organization</p>
<ol>
<li>large virtual pages ( cache block )( 4 KB to 2 MB )</li>
<li>fully associative</li>
<li>sophisticated replacement algorithms</li>
<li>use write-back</li>
</ol>
<p><strong>Page Tables</strong></p>
<p>A data structure stored in physical memory that maps virtual pages to physical pages.</p>
<p><img src="http://img.blog.csdn.net/20140727083649381" alt=""></p>
<p>Page Hit</p>
<p>Check valid bit, uses the physical memory address in the PTE (which points to the start of the cached page in PP 1) to construct the physical address of the word.</p>
<p><img src="http://img.blog.csdn.net/20140727084524775" alt=""></p>
<p>Page Faults</p>
<p>The page fault exception invokes a <strong>page fault exception handler</strong> in the kernel</p>
<ol>
<li>selects a victim page, in this case VP 4 stored in PP 3.</li>
<li>modifies the page table entry for VP 4 to reflect the fact that VP 4 is no longer cached in main memory.</li>
<li>copies VP 3 from disk to PP 3 in memory, updates PTE 3, and then returns.</li>
<li>restarts the faulting instruction and page hit</li>
<li>The strategy of waiting until the last moment to swap in a page, when a miss occurs, is known as <strong>demand paging</strong></li>
</ol>
<p><img src="http://img.blog.csdn.net/20140727085405051" alt=""></p>
<h4>9.4 VM as a Tool for Memory Management</h4>
<p>Operating systems provide a <strong>separate page table</strong>, and thus a separate virtual address space, for each <strong>process</strong>.</p>
<ol>
<li>
<p>Linking: Allow each <strong>process</strong> to use the same basic format for its memory image ( code segment always start at 0x400000 )</p>
</li>
<li>
<p>Loading: (1) Allocate Virtual Pages (2) Mark as invalid ( not cached ) (3) Point table entries to the location of in object file (4) Data are paged in th first time referenced</p>
</li>
<li>
<p>Sharing: Multiple processes share a single copy of some code</p>
</li>
<li>
<p>Memory Allocation</p>
<p><img src="http://img.blog.csdn.net/20140727090642531" alt=""></p>
<p>​</p>
<h4></h4>
<p>​</p>
</li>
</ol>
<h4>9.5 VM as a Tool for Memory Protection</h4>
<p>three permission bits to each PTE</p>
<ul>
<li>SUP must run in kernel mode</li>
<li>READ / WRITE</li>
</ul>
<p>&lt;br/&gt;</p>
<h4>9.6 Address Translation</h4>
<p>a mapping between an N-element virtual address space and M-element physical address space</p>
<p><img src="http://img.blog.csdn.net/20140727120229642" alt=""></p>
<p>Steps that the CPU hardware performs when there is a page hit / fault</p>
<p><img src="http://img.blog.csdn.net/20140727120529090" alt=""></p>
<p>Speeding up Address Translation with a TLB</p>
<ul>
<li>a small cache of PTEs in the MMU called a translation look aside buffer (TLB)</li>
</ul>
<p>Multi-Level Page Tables</p>
<p><img src="http://img.blog.csdn.net/20140727132255390" alt=""></p>
<p><img src="http://img.blog.csdn.net/20140727133211948" alt=""></p>
<p>つ....つづく！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/28/CSAPP/ch8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aria">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Aria">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/28/CSAPP/ch8/" itemprop="url">[CS:APP-ch8] Exceptional Control Flow</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-28T17:28:51+08:00">
                2017-12-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSAPP/" itemprop="url" rel="index">
                    <span itemprop="name">CSAPP</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/12/28/CSAPP/ch8/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/12/28/CSAPP/ch8/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2>CS:APP ch-8 Exceptional Control Flow</h2>
<p>control flow</p>
<ul>
<li>sequence of control transfers ( from the address of instruction to the next )</li>
</ul>
<p><strong>Exceptional Control Flow ( ECF )</strong></p>
<ul>
<li>Abrupt changes in control flow</li>
<li>Occurs all levels
<ol>
<li>Hardware:  Transfers to exceptional handlers</li>
<li>Operating System: Context switch</li>
<li>Application: Signal</li>
<li>Individual Program: Nonlocal jump</li>
</ol>
</li>
</ul>
<p>&lt;!-- more --&gt;
&lt;br/&gt;</p>
<h4>8.1 Exceptions</h4>
<p>DEF</p>
<ul>
<li>Abrupt change in control flow in response to some change in the processor's state</li>
</ul>
<p>event</p>
<ul>
<li>change in state</li>
</ul>
<p><strong>Exception Handling</strong></p>
<ul>
<li>Hardware
<ol>
<li>processor detect an event</li>
<li>determine corresponding exception number k</li>
<li>trigger exception by calling the handler through entry k of the exception table</li>
</ol>
</li>
<li>Software ( handler )
<ol>
<li>do some processing</li>
<li>return control to the interrupted control flow</li>
</ol>
</li>
<li>Difference with procedure call
<ol>
<li>return either current or next instruction</li>
<li>push additional processor state to restart ( on kernel stack )</li>
<li>handlers run in kernel mode</li>
</ol>
</li>
</ul>
<p><img src="http://img.blog.csdn.net/20140725235855886" alt=""></p>
<p><img src="http://img.blog.csdn.net/20140726000658286" alt=""></p>
<p>Classes of Exceptions</p>
<ul>
<li>Interrupt: I/O devices</li>
<li>Trap: System call ( fork, read, execve, exit )</li>
<li>Fault: error conditions that might be able to correct or just abort ( page fault, segmentation fault, divide zero )</li>
<li>Abort: unrecoverable ( machine check )</li>
</ul>
<p><img src="http://img.blog.csdn.net/20140726001053046" alt=""></p>
<h4>8.2 Processes</h4>
<p>DEF: An instance of program in execution</p>
<p>program run in context of process</p>
<p><strong>Logical Control Flow</strong></p>
<ul>
<li>provide an illusion that program has exclusive use of the processor</li>
<li>The sequence of PC values is know as logical control flow</li>
<li>Each process executes a portion of its flow and then is preempted (temporarily suspended) while other processes take their turns.</li>
</ul>
<p>Concurrent Flow</p>
<ul>
<li>A logic flow whose execution overlaps in time with another flow</li>
</ul>
<p><strong>Concurrency</strong></p>
<ul>
<li>The general phenomenon of multiple flows executing concurrently</li>
</ul>
<p>Parallel Flow</p>
<ul>
<li>subset of concurrent flow that run on different cores</li>
</ul>
<p>&lt;br/&gt;</p>
<p><strong>Private Address Space</strong></p>
<ul>
<li>
<p>provide an illusion that program has exclusive use of the system address's space</p>
<p><img src="http://img.blog.csdn.net/20140726011912515" alt=""></p>
</li>
</ul>
<p>User and kernel mode: mode bit</p>
<p>&lt;br/&gt;</p>
<p>context</p>
<ul>
<li>the state that kernel needs to restart the preempted process</li>
</ul>
<ul>
<li>( general-purpose registers, floating point registers, program counter, user's stack, status register, kernel's stack, page table, process table, file table )</li>
</ul>
<p>scheduling</p>
<ul>
<li>the kernel decide to preempt the current process and restart a previously preempted process</li>
</ul>
<p><strong>Context Switch</strong></p>
<ol>
<li>Saves context of the current process</li>
<li>Restores the saved context of previous process</li>
<li>Passes control to newly restored process</li>
</ol>
<p>&lt;br/&gt;</p>
<p>Example when execute read system call ( disk )</p>
<p>Kernel switch process until disk sends an interrupt signal</p>
<p><img src="http://img.blog.csdn.net/20140726012538578" alt=""></p>
<h4>8.4 Process Control</h4>
<p><strong>Obtaining Process ID</strong></p>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line"><span class="keyword">pid_t</span> getpid ( <span class="keyword">void</span> );</span>
</pre></td></tr></table></figure></p>
<p>&lt;br/&gt;</p>
<p><strong>Create and Terminating process</strong></p>
<p>Three states</p>
<ol>
<li>Running</li>
<li>Stopped</li>
<li>Terminated</li>
</ol>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exit</span> <span class="params">( <span class="keyword">int</span> status )</span></span>;</span>
</pre></td></tr></table></figure></p>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
</pre></td><td class="code"><pre><span class="line"><span class="comment">//return 0 to child, PID of chile to parent</span></span>
<span class="line"><span class="keyword">pid_t</span> fork ( <span class="keyword">void</span> );</span>
</pre></td></tr></table></figure></p>
<ul>
<li>Call Once Return Twice</li>
<li>Concurrent execution</li>
<li>Duplicate but separate address space</li>
<li>Shared files</li>
</ul>
<p><img src="http://blog.wuxu92.com/images/post/fork-graph.png" alt=""></p>
<p><strong>Reaping Child Process</strong></p>
<p>The process kept around in a terminated state until it is reaped by its parent</p>
<blockquote>
<p>父进程进行回收的函数，也是一个等待子进程执行结束的函数就是waitpid。这在 APUE（advanced programming in unix enviroment）中很早就提过这个函数</p>
</blockquote>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
</pre></td><td class="code"><pre><span class="line"><span class="comment">// return PID of terminated child and reap it</span></span>
<span class="line"><span class="keyword">pid_t</span> waitpid(<span class="keyword">pid_t</span> pid, <span class="keyword">int</span> *statud, <span class="keyword">int</span> options)</span>
</pre></td></tr></table></figure></p>
<p>&lt;br/&gt;</p>
<p><strong>Putting Process to Sleep</strong></p>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
</pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">sleep</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> secs)</span></span>;</span>
<span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pause</span><span class="params">(<span class="keyword">void</span>)</span></span>; <span class="comment">// 一直休眠，直到收到一个信号</span></span>
</pre></td></tr></table></figure></p>
<p><strong>Loading and Running Programs</strong></p>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
</pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">execve</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *filename, <span class="keyword">const</span> <span class="keyword">char</span> *argv[], <span class="keyword">const</span> <span class="keyword">char</span> *envp[])</span></span>;</span>
</pre></td></tr></table></figure></p>
<p>&lt;br/&gt;</p>
<h4>8.5 Signals</h4>
<p>The transfer of a signal to a destination process occurs in two distinct steps</p>
<p>Sending a signal</p>
<ul>
<li>The kernel has detected a system event such as a divide-by-zero error or the termination of a child process.</li>
<li>A process has invoked the kill function to explicitly request the kernel to send a signal to the destination process. A process can send a signal to itself.</li>
</ul>
<p>Receiving a signal</p>
<ul>
<li>The process can either ignore the signal, terminate, or catch the signal by executing a user-level function called a signal handler.</li>
</ul>
<p>Pending signal</p>
<ul>
<li>A signal that has been sent but not yet received</li>
<li>At any point in time, there can be at most one pending signal of a particular type.</li>
<li>Received at most once: The kernel sets bit k in pending whenever a signal of type k is delivered and clears bit k in pending whenever a signal of type k is received.</li>
</ul>
<p>&lt;br/&gt;</p>
<h4>8.6 Nonlocal Jumps</h4>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/27/CSAPP/ch-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aria">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Aria">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/27/CSAPP/ch-6/" itemprop="url">[CS:APP-ch6] The Memory Hierarchy</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-27T20:29:51+08:00">
                2017-12-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSAPP/" itemprop="url" rel="index">
                    <span itemprop="name">CSAPP</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/12/27/CSAPP/ch-6/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/12/27/CSAPP/ch-6/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2>CS:APP ch-6 The Memory Hierarchy</h2>
<h4>6.1 Storage Technologies</h4>
<p>SRAM</p>
<ul>
<li><strong>cache</strong>, transistor, stable, fast, expensive</li>
</ul>
<p>&lt;br/&gt;</p>
<p>DRAM</p>
<ul>
<li><strong>main memory</strong>,  capacitor, sensitive( periodically refresh every bit )</li>
<li>d * w cells --&gt; d supercells  == r rows * c columns ( two dimension array )</li>
<li>data pins ( w bits ) &amp; addr pins ( row addr i, column addr j )</li>
<li>Memory modules: Each supercell stores 11 byte. Each address represent by 8 supercells</li>
<li>Enhanced DRAM
&lt;!-- more --&gt;
<img src="http://img.blog.csdn.net/20140704131022875" alt=""></li>
</ul>
<p><img src="http://img.blog.csdn.net/20140704131344546" alt=""></p>
<p>&lt;br/&gt;</p>
<p>Nonvolatile Memory ( ROM )</p>
<ul>
<li>
<p>retain information even when they're powered off</p>
</li>
<li>
<p>Flash memory ( erasable programmable ROM )</p>
</li>
<li>
<p>firmware: programs stored in ROM</p>
<p>&lt;br/&gt;</p>
</li>
</ul>
<p>Accessing Main Memory</p>
<ul>
<li>I/O bridge: translate signals</li>
</ul>
<p>&lt;br/&gt;</p>
<p>Disk</p>
<ul>
<li>
<p>platter --&gt; surface --&gt; track --&gt; sectors</p>
<p><img src="http://img.blog.csdn.net/20140704134951375" alt=""></p>
</li>
<li>
<p>Logical Disk Blocks: hide complexity from OS</p>
</li>
<li>
<p>disk controller: maintains mapping between logical block number and physical disk sectors</p>
</li>
<li>
<p>I/O devices: USB, graphics card, host bus adapter</p>
</li>
<li>
<p>I/O bus: connect disks to CPU and main memory, independent under CPU</p>
</li>
</ul>
<p><img src="http://img.blog.csdn.net/20140704150817828" alt=""></p>
<p>Accessing Disk</p>
<ul>
<li>Memory mapped I/O: a block of addresses in the address space is reserved for communicating with I/O devices. Each of these address is known as an I/O <strong>port</strong>. Each device associated with one or more ports.</li>
<li>CPU read disk
<ol>
<li>initiate a read</li>
<li>indicate logical block number that should be read</li>
<li>indicate main memory address to store disk sector</li>
<li>do other work</li>
</ol>
</li>
<li>Disk controller receives the read command
<ol>
<li>translates logical block number to sector address</li>
<li>read content</li>
<li>transfer content directly to main memory ( DMA )</li>
<li>send a interrupt signal to CPU</li>
</ol>
</li>
<li>CPU returns control to the point where interrupted</li>
</ul>
<p><img src="http://img.blog.csdn.net/20140704152101593" alt=""></p>
<p><img src="http://img.blog.csdn.net/20140704152111687" alt=""></p>
<p>Solid State Disk</p>
<ul>
<li>A page can be written only after the entire block it belongs to has erased</li>
<li>A block wears out after roughly 100, 000 repeated writes</li>
<li>Advantage: semiconductor, faster, use less power, more rugged</li>
<li>Disadvantage: potential to wear out, expensive</li>
</ul>
<p>&lt;br/&gt;</p>
<h4>6.2 Locality</h4>
<p>Temporal Locality: reference again multiple times</p>
<p>Spatial Locality: reference nearby locations</p>
<p>stride-k reference pattern: visiting every kth element of a contiguous vector</p>
<p>k increase, spatial decrease</p>
<p>&lt;br/&gt;</p>
<h4>6.3 The Memory Hierarchy</h4>
<p><img src="http://img.blog.csdn.net/20140715185732354" alt=""></p>
<p>Caching in memory hierarchy</p>
<p><img src="http://img.blog.csdn.net/20140715191154022" alt=""></p>
<p>Cache hits</p>
<p>Cache misses</p>
<ul>
<li>replacing / evicting the block, victim block, replacement policy</li>
</ul>
<p>Kind of Cache misses</p>
<ul>
<li>cold miss: cache is empty</li>
<li>conflict miss: map to the same block</li>
<li>capacity miss: size of working set exceed</li>
</ul>
<p>Cache management</p>
<ul>
<li>partition storage into blocks, transfer blocks between levels, deal with hits and misses</li>
<li>compiler -- register file</li>
<li>hardware logic -- L1, L2, L3 caches</li>
<li>OS + Address Translation hardware -- main memory</li>
<li>AFS client process -- disk</li>
</ul>
<p>&lt;br/&gt;</p>
<h4>6.4 Cache Memories</h4>
<p>Main memory: $ M = 2^m $</p>
<p>cache: $ C = S * E * B $</p>
<ul>
<li>$ S = 2^s $ cache sets, $ E $  = cache lines, $ B = 2^b $  = bytes per block</li>
</ul>
<p>Address:</p>
<ul>
<li>set index = $ log_2S $  -- Sets</li>
<li>tag = $ m - ( s + b ) $ -- Lines</li>
<li>block offset = $ log_2B $  -- blocks</li>
</ul>
<p><img src="http://img.blog.csdn.net/20140715231707062" alt=""></p>
<p><strong>Process that cache determine hit or miss</strong></p>
<ol>
<li>Set Selection</li>
<li>Line matching: search each line, find tag bits in cache match tag bits in address</li>
<li>Word Extraction: block offset provide first byte of desired word</li>
<li>Line Replacement: random / least frequently used / least recently used</li>
</ol>
<p>&lt;br/&gt;</p>
<p><strong>Direct-Mapped Caches</strong></p>
<p>one line per set ( E = 1 )</p>
<p><strong>Set Associative Caches</strong></p>
<p>a E-way set</p>
<p>$ 1 &lt; E &lt; C/B $</p>
<p><strong>Fully Associative Caches</strong></p>
<p>S = 1</p>
<p>$ E = C/B $</p>
<p>&lt;br/&gt;</p>
<p>Issues with writes</p>
<ul>
<li>write-through ( immediately write to next lower level when hit )</li>
<li>no-write-allocate ( write directly to next lower level when miss )</li>
<li>write-back ( defers the update until it is evicted when hit )</li>
<li>write-allocate ( load the block into cache and update it when miss )</li>
</ul>
<p>&lt;br/&gt;</p>
<p>Anatomy of real cache hierarchy</p>
<ul>
<li>Instruction cache ( i-cache )</li>
<li>Data cache ( d-cache )</li>
<li>both ( unified cache )</li>
</ul>
<p><img src="http://img.blog.csdn.net/20140716145031067" alt=""></p>
<h4>6.5 Writing Cache-Friendly Code</h4>
<h4>6.6 Putting It Together: The Impact of Caches on Program Performance</h4>
<p>smaller size -- better temporal locality</p>
<p>smaller stride -- better spatial locality</p>
<p>The memory mountain</p>
<p><img src="http://yubinbai.com/images/csapp.png" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/25/CSAPP/ch4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aria">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Aria">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/25/CSAPP/ch4/" itemprop="url">[CS:APP-ch4] Processor Architecture</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-25T13:33:51+08:00">
                2017-12-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSAPP/" itemprop="url" rel="index">
                    <span itemprop="name">CSAPP</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/12/25/CSAPP/ch4/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/12/25/CSAPP/ch4/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2>CS:APP-ch4 Processor Architecture</h2>
<p>ISA --&gt; SEQ --&gt; PIPE</p>
<h4>4.1 The Y86-64 Instruction Set Architecture (ISA)</h4>
<p>Programmer-Visible State</p>
<ul>
<li>Program registers</li>
<li>Condition codes</li>
<li>Program Counter(PC)</li>
<li>Memory</li>
<li>Status code</li>
</ul>
<p>&lt;!-- more --&gt;
<img src="http://p.blog.csdn.net/images/p_blog_csdn_net/RichardYSteven/EntryImages/20100104/y86%20visible.JPG" alt=""></p>
<p>Y86-64 Instructions</p>
<ol>
<li>type: code function</li>
<li>register specifier bytes: rA rB</li>
<li>additional 8-byte constant word: immediate data, displacement, destination</li>
</ol>
<p><img src="https://y86tutoring.files.wordpress.com/2012/10/y86-instructions-linked1.png" alt=""></p>
<p>Aside RISC &amp; CISC</p>
<ul>
<li>Y86-64 include both</li>
</ul>
<ul>
<li>CISC: condition codes, variable length instructions, stack to store return address</li>
<li>RISC: use load/store architecture and regular instruction encoding, pass argument through registers</li>
</ul>
<h4>4.2 Logical Design and the Hardware Control Language HCL</h4>
<h4>4.3 Sequential Y86-64 Implementations</h4>
<p><strong>Organizing processing into stages</strong></p>
<ul>
<li>Fetch: icode, ifun, valC = 8-byte constant, valP = next PC</li>
<li>Decode: register valA = rA valB = rB</li>
<li>Execute: valE = valA OP valB, CC</li>
<li>Memory: valM = read/write from memory</li>
<li>Write back: two result to register file</li>
<li>PC Update: PC = valP</li>
</ul>
<p><strong>SEQ Hardware Structure</strong></p>
<p><img src="http://slideplayer.com/slide/8881654/26/images/52/SEQ+Hardware+Key+Blue+boxes:+predesigned+hardware+blocks.jpg" alt=""></p>
<p><strong>SEQ Timing</strong></p>
<p>SEQ:</p>
<ul>
<li>combinational logic</li>
<li>two memory devices
<ol>
<li>clocked register ( PC, CC reg )</li>
<li>random access memory ( register file, instruction memory, data memory )</li>
</ol>
</li>
</ul>
<p>Combinational logic does not require sequencing or control</p>
<p>Instruction memory read only therefore also not required</p>
<p>Required explicit control over sequencing</p>
<ul>
<li>Program Counter: loaded with new instruction address every clock cycle</li>
<li>Condition Code register: loaded when integer operation</li>
<li>register file: two ports, allow two program registers be updated on every cycle</li>
<li>data memory: written only when rmmovq, pushq, call is executed</li>
</ul>
<p>PRINCIPLE</p>
<p>never need to read back the state updated by an instruction in order to complete this instruction</p>
<p>states are loaded during the start of next cycle</p>
<p><img src="http://oohcode.com/assets/img/csapp/fig4.25.png" alt=""></p>
<h4>4.4 General Principle of Pipelining</h4>
<p>Throughput: number of instructions served per unit time</p>
<p>Latency: Total time required to perform a single instruction from beginning to end</p>
<p><img src="http://oohcode.com/assets/img/csapp/fig4.33.png" alt=""></p>
<p><strong>Limitations</strong></p>
<ul>
<li>Nonuniform partitioning ( 每个part的执行时间不同造成delay )</li>
<li>Diminishing Returns of Deep Pipelining (分太多了)</li>
<li>Feedback (下一条指令要等上一条执行完)</li>
</ul>
<h4>4.5 Pipelined Y86-64 Implementations</h4>
<p>SEQ+</p>
<ul>
<li>PC update stage comes at the beginning</li>
</ul>
<p>PIPE-</p>
<ul>
<li>insert registers</li>
</ul>
<p>Rearranging and Relabeling Signals</p>
<p>Next PC Prediction</p>
<p><strong>Pipeline Hazard</strong></p>
<ul>
<li>stalling</li>
<li>forwarding</li>
<li>load/use data hazard</li>
<li>control hazard</li>
<li>exception</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/24/CLRS/34-np/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aria">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Aria">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/24/CLRS/34-np/" itemprop="url">[CLRS-ch34] NP-Completeness</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-24T09:58:47+08:00">
                2017-12-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CLRS/" itemprop="url" rel="index">
                    <span itemprop="name">CLRS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/12/24/CLRS/34-np/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/12/24/CLRS/34-np/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2>CLRS-ch34 NP-Completeness</h2>
<h4>Intro</h4>
<p>class P</p>
<ul>
<li>solvable in polynomial time</li>
</ul>
<p>class NP</p>
<ul>
<li>problems are verifiable in polynomial time</li>
</ul>
<p>class NPC</p>
<ul>
<li>it is in NP and is as hard as any problem in NP</li>
<li>decision problems</li>
<li>reductions</li>
<li>the first NP-complete problem</li>
</ul>
<p>&lt;!-- more --&gt;</p>
<h4>34.1 Polynomial time</h4>
<p>Abstract Problems</p>
<ul>
<li>a binary relation on a set I of instances and a set S of solutions</li>
</ul>
<p>Encodings</p>
<ul>
<li>In order to solve abstract problems, represent problem instances in a way program understands</li>
<li>a mapping e from S to the set of binary strings</li>
<li>Abstract Pro--&gt;  Encode --&gt; Concrete Pro --&gt;Algorithm Solve</li>
<li>polynomial related</li>
</ul>
<p>Polynomial time solvable</p>
<ul>
<li>exist an algorithm to solve a concrete problem in $O(n^k)$</li>
<li>extend the definition from concrete to abstract by using encoding as bridge</li>
</ul>
<p>A formal language framework</p>
<ul>
<li>alphabet $\Sigma $ a finite set of symbols { 0,1 }</li>
<li>language L over Σ is any set of strings made up of symbols from Σ { 10, 11, 101 ... }</li>
<li>$ \Sigma ^* $ the language of all strings over Σ</li>
</ul>
<p>view instances for any decision problems Q as a language L over Σ = { 0 ,1 }</p>
<p>Accepted</p>
<ul>
<li>The language L accepted by an algorithm A $ L = \{ x \in \{0,1\}^* : A(x) = 1 \} $</li>
</ul>
<ul>
<li>Reject : A(x) = 0</li>
<li>may runs forever if doesn't accept</li>
</ul>
<p>Decided</p>
<ul>
<li>The language L decided by an algorithm A</li>
<li>if every binary string in L is accepted by A (output 1) and every binary string not in L is rejected ( output 0)</li>
<li>$ x \in L $  --&gt;  A(x) = 1, $ x\notin L $  --&gt; A(x) = 0</li>
</ul>
<p><strong>Complexity class P</strong></p>
<p>$ P = \{ L \subseteq \{ 0,1 \}^{*} $ : exists an algorithm A that decides L in polynomial time $ \}$</p>
<h4>34.2 Polynomial-time verification</h4>
<p>algorithms verify membership from a certificate in languages</p>
<p>Verified</p>
<ul>
<li>The language L verified by an algorithm A $ L = \{ x \in \{ 0, 1 \}^* : $ there exist $ y \in \{ 0,1 \}^* $ such that A( x,y ) = 1 $ \} $</li>
</ul>
<p><strong>Complexity class NP</strong></p>
<p>$ NP = \{ L \subseteq \{ 0, 1 \}^*  : L = \{ x \in \{ 0,1\}^* $ : there exists a certificate y with |y| = $O(|x|^c) $ such that A(x,y) = 1 $ \} \} $</p>
<p>$P \subseteq NP $</p>
<p><strong>Complexity class co-NP</strong></p>
<ul>
<li>set of languages L such that $ \bar L \in NP $</li>
</ul>
<p>Four possibilities for relationship among complexity class</p>
<p><img src="http://staff.ustc.edu.cn/~csli/graduate/algorithms/book6/928_a.gif" alt=""></p>
<h4>34.3 NP-completeness and reducibility</h4>
<p><strong>Reducibility</strong></p>
<ul>
<li>if Q -- &gt; reduce --&gt; Q' , Q is &quot;no harder to solve&quot; than Q'</li>
<li>$ Q  \le_p Q' $ ( no more than a polynomial factor harder )</li>
</ul>
<p><strong>NP-completeness</strong></p>
<ol>
<li>$ L  \in NP $</li>
<li>$ L' \le_p L $ for every $ L' \in NP $. (hardest)</li>
</ol>
<p><strong>Theorem 34.4</strong></p>
<ul>
<li>If any NP-complete problem is polynomial time solvable, then <strong>P = NP</strong></li>
<li>If any problem in NP is not polynomial-time solvable, then all NP-complete problems are not polynomial-time solvable.</li>
</ul>
<p><img src="http://staff.ustc.edu.cn/~csli/graduate/algorithms/book6/932_a.gif" alt=""></p>
<p><strong>Circuit satisfiability</strong></p>
<p>Given a boolean combinational circuit composed of AND, OR, and NOT gates, is it satisfiable?</p>
<p>34.5 belongs to NP</p>
<p>34.6 NP-hard</p>
<ul>
<li>basic idea : represent the computation of A(algorithm verify L) as a sequence of configurations.</li>
<li>Each configuration is mapped to the next configuration by a boolean combinational circuit M. The output is a distinguished bit in the working storage.</li>
<li>The reduction algorithm F constructs a single combinational circuit that computes all configurations produced by a given initial configuration.</li>
<li><img src="http://staff.ustc.edu.cn/~csli/graduate/algorithms/book6/936_a.gif" alt=""></li>
</ul>
<h4>34.5 NP-complete problems</h4>
<p><img src="http://staff.ustc.edu.cn/~csli/graduate/algorithms/book6/947_a.gif" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/20/ACM/kuangbin-12/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aria">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Aria">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/20/ACM/kuangbin-12/" itemprop="url">kuangbin专题十二 基础DP</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-20T13:37:45+08:00">
                2017-12-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/12/20/ACM/kuangbin-12/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/12/20/ACM/kuangbin-12/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2>kuangbin 专题十二 基础DP</h2>
<h3>LIS</h3>
<p>dp[ i ]代表前i个数的最长子序列大小</p>
<p>dp[ i ] =max { dp[ j ] + 1 } ( val[ j ] &lt; val[ i ] )</p>
<p>$ O ( n^2 ) $
&lt;!-- more --&gt;
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
<span class="line">9</span>
<span class="line">10</span>
<span class="line">11</span>
<span class="line">12</span>
<span class="line">13</span>
<span class="line">14</span>
<span class="line">15</span>
</pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> dp[ N ], val[ N ];</span>
<span class="line"></span>
<span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LIS</span> <span class="params">( <span class="keyword">int</span> n )</span> </span>&#123;</span>
<span class="line">    <span class="keyword">int</span> mx = <span class="number">0</span>;</span>
<span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i ) &#123;</span>
<span class="line">        dp[ i ] = <span class="number">1</span>;</span>
<span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; ++j ) &#123;</span>
<span class="line">            <span class="keyword">if</span> ( val[ j ] &lt; val[ i ] &amp;&amp; dp[ i ] &lt; dp[ j ] + <span class="number">1</span> )</span>
<span class="line">                dp[ i ] = dp[ j ] + <span class="number">1</span>;</span>
<span class="line">        &#125;</span>
<span class="line">        <span class="keyword">if</span> ( mx &lt; dp[ i ] )</span>
<span class="line">            mx = dp[ i ];</span>
<span class="line">    &#125;</span>
<span class="line">    <span class="keyword">return</span> mx;</span>
<span class="line">&#125;</span>
</pre></td></tr></table></figure></p>
<p>$ O ( nlgn ) $</p>
<p>http://www.geeksforgeeks.org/longest-monotonically-increasing-subsequence-size-n-log-n/</p>
<p>http://blog.csdn.net/shuangde800/article/details/7474903</p>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
<span class="line">9</span>
<span class="line">10</span>
<span class="line">11</span>
<span class="line">12</span>
<span class="line">13</span>
<span class="line">14</span>
<span class="line">15</span>
<span class="line">16</span>
<span class="line">17</span>
<span class="line">18</span>
<span class="line">19</span>
<span class="line">20</span>
<span class="line">21</span>
<span class="line">22</span>
<span class="line">23</span>
<span class="line">24</span>
<span class="line">25</span>
<span class="line">26</span>
<span class="line">27</span>
<span class="line">28</span>
<span class="line">29</span>
<span class="line">30</span>
<span class="line">31</span>
<span class="line">32</span>
<span class="line">33</span>
<span class="line">34</span>
</pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> val[ N ];<span class="comment">//输入的值</span></span>
<span class="line"><span class="keyword">int</span> len;<span class="comment">//ed数组的长度（LIS长度）</span></span>
<span class="line"><span class="keyword">int</span> ed[ N ];<span class="comment">//每个长度的序列的末尾</span></span>
<span class="line"></span>
<span class="line"><span class="comment">//下界，返回 &gt;= 所查找对象的第一个位置</span></span>
<span class="line"><span class="function"><span class="keyword">int</span> <span class="title">binary_search</span> <span class="params">( <span class="keyword">int</span> i )</span> </span>&#123;</span>
<span class="line">    <span class="keyword">int</span> left, right, mid;</span>
<span class="line">    left = <span class="number">0</span>, right = len;</span>
<span class="line">    <span class="keyword">while</span> ( left &lt; right ) &#123;</span>
<span class="line">        mid = left + ( right - left ) / <span class="number">2</span>;</span>
<span class="line">        <span class="keyword">if</span> ( ed[ mid ] &gt;= val[ i ] )</span>
<span class="line">            right = mid;</span>
<span class="line">        <span class="keyword">else</span></span>
<span class="line">            left = mid + <span class="number">1</span>;</span>
<span class="line">    &#125;</span>
<span class="line">    <span class="keyword">return</span> left;</span>
<span class="line">&#125;</span>
<span class="line"></span>
<span class="line"><span class="function"><span class="keyword">void</span> <span class="title">LIS</span> <span class="params">( <span class="keyword">int</span> n )</span> </span>&#123;</span>
<span class="line">    ed[ <span class="number">1</span> ] = val[ <span class="number">1</span> ];</span>
<span class="line">    len = <span class="number">1</span>;</span>
<span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i ) &#123;</span>
<span class="line">      <span class="comment">//更新最长的末尾</span></span>
<span class="line">        <span class="keyword">if</span> ( val[ i ] &gt; ed[ len ] )</span>
<span class="line">            ed[ ++len ] = val[ i ];</span>
<span class="line">      <span class="comment">//产生了新的序列，改变旧的长度的末尾</span></span>
<span class="line">        <span class="keyword">else</span> &#123;</span>
<span class="line">            <span class="comment">// 如果用STL： pos=lower_bound(ed,ed+len,val[i])-ed;</span></span>
<span class="line">            <span class="keyword">int</span> pos = binary_search ( i );</span>
<span class="line">            ed[ pos ] = val[ i ];</span>
<span class="line">        &#125;</span>
<span class="line">        <span class="built_in">printf</span> ( <span class="string">"%d\n"</span>, len );</span>
<span class="line">    &#125;</span>
<span class="line">&#125;</span>
</pre></td></tr></table></figure></p>
<h3>LCS</h3>
<p>dp[ i ][ j ] 代表两个字符串前i / j 个下的最长大小</p>
<p>dp[ i ][ j ] = dp[ i - 1 ][ j - 1 ] + 1 ( val[ i ] == val[ j ] )</p>
<p>dp[ i ][ j ] = max ( dp[ i - 1 ][ j ], dp[ i ][ j - 1 ] ) ( != )</p>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
<span class="line">9</span>
<span class="line">10</span>
<span class="line">11</span>
<span class="line">12</span>
<span class="line">13</span>
<span class="line">14</span>
<span class="line">15</span>
<span class="line">16</span>
<span class="line">17</span>
<span class="line">18</span>
<span class="line">19</span>
<span class="line">20</span>
<span class="line">21</span>
<span class="line">22</span>
<span class="line">23</span>
<span class="line">24</span>
<span class="line">25</span>
<span class="line">26</span>
<span class="line">27</span>
<span class="line">28</span>
<span class="line">29</span>
<span class="line">30</span>
<span class="line">31</span>
<span class="line">32</span>
<span class="line">33</span>
<span class="line">34</span>
<span class="line">35</span>
<span class="line">36</span>
</pre></td><td class="code"><pre><span class="line"><span class="comment">//CLRS 15.4</span></span>
<span class="line"></span>
<span class="line"><span class="keyword">int</span> len1, len2;</span>
<span class="line"><span class="keyword">char</span> s1[ N ], s2[ N ];</span>
<span class="line"><span class="keyword">int</span> dp[ N ][ N ];</span>
<span class="line"></span>
<span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">max</span> <span class="params">( <span class="keyword">int</span> a, <span class="keyword">int</span> b )</span> </span>&#123; <span class="keyword">return</span> a &gt; b ? a : b; &#125;</span>
<span class="line"></span>
<span class="line"><span class="function"><span class="keyword">void</span> <span class="title">LCS</span> <span class="params">()</span> </span>&#123;</span>
<span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len1; i++ ) &#123;</span>
<span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= len2; j++ ) &#123;</span>
<span class="line">            <span class="keyword">if</span> ( s1[ i ] == s2[ j ] )</span>
<span class="line">                dp[ i ][ j ] = dp[ i - <span class="number">1</span> ][ j - <span class="number">1</span> ] + <span class="number">1</span>;</span>
<span class="line">            <span class="keyword">else</span></span>
<span class="line">                dp[ i ][ j ] = max ( dp[ i - <span class="number">1</span> ][ j ], dp[ i ][ j - <span class="number">1</span> ] );</span>
<span class="line">        &#125;</span>
<span class="line">    &#125;</span>
<span class="line">&#125;</span>
<span class="line"></span>
<span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span> <span class="params">( <span class="keyword">int</span> i, <span class="keyword">int</span> j )</span> </span>&#123;</span>
<span class="line">    <span class="comment">//当最长的子序列搜索完，但其中一串仍有剩余时，输出</span></span>
<span class="line">    <span class="keyword">if</span> ( i == <span class="number">0</span> || j == <span class="number">0</span> ) &#123;</span>
<span class="line">        <span class="keyword">return</span>;</span>
<span class="line">    &#125;</span>
<span class="line">    <span class="comment">//找到公共字符</span></span>
<span class="line">    <span class="keyword">if</span> ( s1[ i ] == s2[ j ] ) &#123;</span>
<span class="line">        Print ( i - <span class="number">1</span>, j - <span class="number">1</span> );</span>
<span class="line">        <span class="built_in">printf</span> ( <span class="string">"%c"</span>, s1[ i ] );</span>
<span class="line"></span>
<span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ( dp[ i - <span class="number">1</span> ][ j ] &gt; dp[ i ][ j - <span class="number">1</span> ] ) &#123;</span>
<span class="line">        Print ( i - <span class="number">1</span>, j );</span>
<span class="line"></span>
<span class="line">    &#125; <span class="keyword">else</span> &#123;</span>
<span class="line">        Print ( i, j - <span class="number">1</span> );</span>
<span class="line">    &#125;</span>
<span class="line">&#125;</span>
</pre></td></tr></table></figure></p>
<h3>完全背包</h3>
<p>dp[ i ]代表背包重i的时候最大的价值</p>
<p>dp[ i ] = min ( dp[ i ], dp[ i - w[ j ] ] + v[ j ] )</p>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
<span class="line">9</span>
<span class="line">10</span>
<span class="line">11</span>
<span class="line">12</span>
<span class="line">13</span>
<span class="line">14</span>
<span class="line">15</span>
<span class="line">16</span>
<span class="line">17</span>
</pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> v[ N ], w[ N ]; <span class="comment">// value，weight</span></span>
<span class="line"><span class="keyword">int</span> dp[ N ];</span>
<span class="line"></span>
<span class="line"><span class="comment">//n个物品，最多装wei的东西</span></span>
<span class="line"><span class="function"><span class="keyword">int</span> <span class="title">knapsack</span> <span class="params">( <span class="keyword">int</span> n, <span class="keyword">int</span> wei )</span> </span>&#123;</span>
<span class="line">    <span class="built_in">memset</span> ( dp, INF, <span class="keyword">sizeof</span> ( dp ) );</span>
<span class="line">    dp[ <span class="number">0</span> ] = <span class="number">0</span>;</span>
<span class="line"></span>
<span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= wei; ++i ) &#123;</span>
<span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j ) &#123;</span>
<span class="line">            <span class="keyword">if</span> ( i &gt;= w[ j ] )</span>
<span class="line">                dp[ i ] = min ( dp[ i ], dp[ i - w[ j ] ] + v[ j ] );</span>
<span class="line">        &#125;</span>
<span class="line">    &#125;</span>
<span class="line"></span>
<span class="line">    <span class="keyword">return</span> dp[ wei ];</span>
<span class="line">&#125;</span>
</pre></td></tr></table></figure></p>
<h3>题目列表</h3>
<p><strong>A - Max Sum Plus Plus HDU - 1024</strong></p>
<blockquote>
<p>n个数，要求分成m组，使m组的和加起来得到最大值。</p>
</blockquote>
<p>dp[i][j]表示前j个数分成i组的最大值。</p>
<p>dp[i][j]=max(dp[i][j-1]+a[j],max(dp[i-1][k])+a[j])</p>
<p><strong>B - Ignatius and the Princess IV HDU - 1029</strong></p>
<blockquote>
<p>给n(奇数)个数，定义特殊的数为在序列中出现次数不少于(n+1)/2次的数，找出这个特殊的数</p>
</blockquote>
<p>一边输入一边记录个数就好了</p>
<p><strong>C - Monkey and Banana HDU - 1069</strong></p>
<blockquote>
<p>给定箱子种类数量n，及对应长宽高，每个箱子数量无限，求其能叠起来的最大高度是多少(上面箱子的长宽严格小于下面箱子)</p>
</blockquote>
<p>按照长排序，在求宽关于高的LIS</p>
<p><strong>D - Doing Homework HDU - 1074</strong></p>
<blockquote>
<p>有n门功课需要完成，每一门功课都有时间期限以及你完成所需要的时间，如果完成的时间超出时间期限多少单位，就会被减多少学分，问以怎样的功课完成顺序，会使减掉的学分最少，有多个解时，输出功课名排列最小的一个。</p>
</blockquote>
<p>15个作业状态压缩来做</p>
<p>枚举每一个状态，枚举每个状态新增的那个节点，再计算最小并记录前一个状态</p>
<p><strong>E - Super Jumping! Jumping! Jumping! HDU - 1087</strong></p>
<blockquote>
<p>从起点到达终点，只能前行不能后退，且下一步必须比前面的点的值大，求所有走的点的值总和最大是多少。</p>
</blockquote>
<p>dp[i] = max(dp[k] + a[j]); 1&lt;=k&lt;=i-1;
最大递增子串和。</p>
<p><strong>F - Piggy-Bank HDU - 1114</strong></p>
<blockquote>
<p>给出存钱罐本身的重量和装钱后的重量，以及存钱罐中钱的面值和重量，求存钱罐装满时，钱的总和最小是多少</p>
</blockquote>
<p>完全背包解题，每种钱币都可以装无限个，注意初始化的值</p>
<p>dp[ i ] = min ( dp[ i ], dp[ i - w[ j ] ] + v[ j ] );</p>
<p><strong>G - 免费馅饼 HDU - 1176</strong></p>
<blockquote>
<p>0—10的点，不同时间在每个点上掉下来物品，只能到达左右两边距离为1和本身所在的位置，求最大物品数</p>
</blockquote>
<p>dp[x][t] = max ( dp[x-1][t-1],dp[x][t-1],dp[x+1][t-1]) + v[x][t]</p>
<p><strong>H - Tickets HDU - 1260</strong></p>
<blockquote>
<p>单张或两张一起买，给出一个一个买票和两个两个买票的时间，求最少</p>
</blockquote>
<p>dp[ i ] = min ( dp[ i - 1 ] + s[ i ], dp[ i - 2 ] + d[ i - 1 ] );</p>
<p><strong>I - 最少拦截系统 HDU - 1257</strong></p>
<blockquote>
<p>求有多少个递减序列</p>
</blockquote>
<p>反过来，转换成求整个系列有多少个LIS，则是所求的组数</p>
<p><strong>J - FatMouse's Speed HDU - 1160</strong></p>
<blockquote>
<p>给n个老鼠的体重和速度，求找出一个最长的序列，此序列体重递增速度递减</p>
</blockquote>
<p>按体重递增排序，再求最长递增(此递增表示体重递增速度递减)子序列。</p>
<p>dp[i] = max(dp[j]+1) 0&lt;=j&lt;=i-1</p>
<p><strong>K - Jury Compromise POJ - 1015</strong></p>
<blockquote>
<p>必须满足辩方总分D和控方总分P的差的绝对值|D-P|最小。如果有多种选择方案的 |D-P| 值相同，那么选辩控双方总分之和D+P最大的方案即可。</p>
</blockquote>
<p>dp(j, k)表示，取j 个候选人，使其辩控差为k 的所有方案中，辩控和最大的那个方案的辩控和。</p>
<p>综上：dp[j][k]=dp[j-1][k-V[i]]+S[i]</p>
<p>正向计算，输出的时候就用正向的输出了,不过每次都要查找下一个位置是否在之前用过了</p>
<p><strong>L - Common Subsequence POJ - 1458</strong></p>
<blockquote>
<p>LCS</p>
</blockquote>
<p>LCS模板</p>
<p><strong>M - Help Jimmy POJ - 1661</strong></p>
<blockquote>
<p>老鼠在时刻0从高于所有平台的某处开始下落.当Jimmy落到某个平台上时，游戏者选择让它向左还是向右跑.当Jimmy跑到平台的边缘时，开始继续下落。Jimmy每次下落的高度不能超过MAX</p>
</blockquote>
<p>dp[i][0] = min(dp[k][0]+l[i]-l[k], dp[k][1]+r[i]-l[k]) + h[i]-h[k]; (左左和左右取最小)
dp[i][1] = min(dp[k][0]+r[i]-l[k], dp[k][1]+r[i]-r[k]) + h[i]-h[k];(右左和右右取最小)</p>
<p><strong>N - Longest Ordered Subsequence POJ - 2533</strong></p>
<blockquote>
<p>LIS</p>
</blockquote>
<p>LIS模板</p>
<p><strong>O - Treats for the Cows POJ - 3186</strong></p>
<blockquote>
<p>n个数在一个双端队列中，每次从队首或队尾出。出的第n个数乘以n，最后加起来，求最大和。</p>
</blockquote>
<p>dp[i][j] 代表从i取到j的最大总数
dp[i][j] = max(dp[i+1][j]+a[i] * (n+i-j) , dp[i][j-1]+a[j] * (n+i-j));</p>
<p><strong>P - FatMouse and Cheese HDU - 1078</strong></p>
<blockquote>
<p>给定一幅图，每个点有一定权值，现在有一只老鼠在起始点（0,0），他能水平或者垂直移动1~k格之后，停在某点并获得权值，而且每次移动后所在的点，都要比刚离开的那个点的权值更大，求最多能获得多少权值。</p>
</blockquote>
<p>DP / Memoized</p>
<p>dp[ x ][ y ] = dp[ xx ][ yy ] + val[ x ][ y ]</p>
<p><strong>Q - Phalanx HDU - 2859</strong></p>
<blockquote>
<p>给了一个字符串矩阵，求以次对角线方向对称的最大对称矩阵。</p>
</blockquote>
<p>每次只需求最外面一层对称个数sum，再和右上角对称矩阵大小加一取最小就行，就求出当前小矩阵的最大对称矩阵。最后取个所有对称矩阵大小的最大值就行。
dp[i][j] = min(sum,dp[i-1][j+1]+1);</p>
<p><strong>R - Milking Time POJ - 3616</strong></p>
<blockquote>
<p>奶牛Bessie在0~N时间段产奶。农夫约翰有M个时间段可以挤奶，时间段f,t内Bessie能挤到的牛奶量e。奶牛产奶后需要休息R小时才能继续下一次产奶，求Bessie最大的挤奶量。</p>
</blockquote>
<p>dp[ i ] = max ( dp[ j ] + node[ i ].val, dp[ i ] ) ( node[ j ].ed &lt;= node[ i ].st  )</p>
<p><strong>S - Making the Grade POJ - 3666</strong></p>
<blockquote>
<p>农夫约翰想修一条尽量平缓的路，路的每一段海拔是A_i，修理后是B_i，花费|A_i – B_i|，求最小花费。</p>
</blockquote>
<p>dp[i][j] = min(dp[i – 1][k]) + |A[i] – B[j]| 离散化</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/14/GSLA/Eigenvalues and Eigenvectors/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aria">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Aria">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/14/GSLA/Eigenvalues and Eigenvectors/" itemprop="url">[GSLA ch-6] Eigenvalues and Eigenvectors</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-14T10:51:52+08:00">
                2017-12-14
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/12/14/GSLA/Eigenvalues and Eigenvectors/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/12/14/GSLA/Eigenvalues and Eigenvectors/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2>Eigenvalues and Eigenvectors</h2>
<h3>6.1 Introduction</h3>
<p>certain vectors x are in the same direction as Ax</p>
<p>basic equation:</p>
<p>​	$ Ax = \lambda x $</p>
<p>how to compute:</p>
<ul>
<li>let $ det(A-\lambda x)= 0 $ ,find the roots  ==  find eigenvalues,  find eigenvectors in Null space</li>
</ul>
<p>$ A^nx = \lambda^n x $</p>
<p>span eigenspace</p>
<p>Projection: $ \lambda = 1 $ or 0</p>
<p>Reflection: $ \lambda = 1 $ or -1</p>
<p>Rotation: complex eigenvalues only</p>
<p>&lt;!-- more --&gt;
&lt;br&gt;</p>
<p><strong>product of eigenvalues  == determinant  == product of pivots</strong></p>
<p><strong>sum of eigenvalues == sum of diagonal entries ( not pivots ) == trace</strong></p>
<p>&lt;br&gt;</p>
<h3>6.2 Diagonalizing</h3>
<p>eigenvectors in columns of S, eigenvalues in diagonal of Λ</p>
<p>$ Λ = S^{-1}AS $</p>
<p>$ A = SΛS^{-1} $</p>
<p>&lt;br&gt;</p>
<p>Independent x from different λ:</p>
<ul>
<li>$ c_1 λ_1 x_1 + c_2 λ_2 x_2 = 0 $</li>
</ul>
<ul>
<li>$ c_1 λ_2 x_2 + c_2 λ_2 x_2 = 0 $</li>
</ul>
<p>subtract</p>
<ul>
<li>$ (λ_1 - λ_2)c_1x_1 = 0 $</li>
</ul>
<p>&lt;br&gt;</p>
<p>diagonalizability:</p>
<ul>
<li>enough eigenvectors (maybe same λ) so that S is invertible</li>
</ul>
<p>$u_k = A^k u_0  = S \Lambda^k S^{-1}u_0$</p>
<ol>
<li>
<p>$ u_0  = c_1x_1 + c_2x_2 + ..  +c_nx_n $ eigenvector basis</p>
</li>
<li>
<p>multiply $\lambda_i ^ k$</p>
</li>
<li>
<p>add up</p>
</li>
</ol>
<p>A,B  share same eigenvector matrix S if and only if AB = BA</p>
<p>&lt;br&gt;</p>
<p><strong>?Heisenberg uncertainty principle</strong></p>
<p>position matrix P, momentum matrix Q, $ QP-PQ = I $</p>
<p>knew P still could not know Q</p>
<p>$ |Px||Qx| \ge \frac{1}{2}|x|^2 $</p>
<p>&lt;br&gt;</p>
<h3>6.3 Applications to Differential Equations</h3>
<p>&lt;br&gt;</p>
<h3>6.4 Symmetric Matrices</h3>
<ol>
<li>real eigenvalues</li>
<li>orthonormal eigenvectors</li>
</ol>
<p><strong>Spectral Theorem</strong></p>
<p>(principle of axis theorem)</p>
<p>$ A = Q\Lambda Q^T $</p>
<p>&lt;br&gt;</p>
<p>Normal Matrices $ \bar A^TA = A \bar A^T $</p>
<p>symmetric,  skewed-symmetric, orthogonal</p>
<p><strong>A has n orthonormal vectors ($ A = Q\Lambda \bar Q ^T $) if and only if A is normal</strong></p>
<p>Real Eigenvalues</p>
<p>proof:</p>
<ul>
<li>$ Ax = \lambda x $                      $ \bar x ^TA = \bar x ^T \bar\lambda $ (  $ A = A^T $ )( conjugate and transpose )</li>
</ul>
<ul>
<li>$ \bar x^T  A x = \bar x^T \lambda x $             $ \bar x ^ T A x = \bar x ^ T \bar\lambda x $</li>
</ul>
<p>left side the same</p>
<p>therefor $ \lambda == \bar \lambda $</p>
<p>&lt;br&gt;</p>
<p>Orthonormal</p>
<p>proof:</p>
<ul>
<li>no eigenvalues repeated</li>
</ul>
<ul>
<li>Allow repeated eigenvalues  ( ? Schur's Theorem )</li>
</ul>
<p>&lt;br&gt;</p>
<p>sum of rank one projection matrices</p>
<p>$ A = \lambda_1x_1x_1^T + \lambda_2x_2x_2^T+... $</p>
<p>$  = \lambda_1P_1 +\lambda_2P2+.... $</p>
<p>&lt;br&gt;</p>
<p>number of positive pivots == number of positive eigenvalues</p>
<p>&lt;br&gt;</p>
<p>$ A = LDL^T $</p>
<p>&lt;br&gt;</p>
<h3>6.5 Positive Definite Matrices</h3>
<p>All λ &gt; 0</p>
<p>&lt;br&gt;</p>
<p>quick way to test</p>
<ol>
<li>
<p>All pivots positive</p>
</li>
<li>
<p>n eigenvalues positive</p>
</li>
<li>
<p><strong>$ x^TAx  $ is positive except x = 0</strong></p>
</li>
<li>
<p>$ A == R^TR $  (symmetric) and R has independent columns ($ x^T R^TRX &gt;= 0 $)</p>
</li>
<li>
<p>n upper left determinants</p>
</li>
</ol>
<p>R can be chosen:</p>
<ul>
<li>rectangular / $ (L\sqrt D)^T $ / $ Q \sqrt\Lambda Q^T $</li>
</ul>
<p>$x^TAx $</p>
<ul>
<li>(2*2) = $ ax^2 + 2bxy + cy^2 &gt; 0 $ ( ellipse  $ z = x^2/a^2 + y^2/b^2 $  )</li>
</ul>
<p>&lt;br&gt;</p>
<p>Application</p>
<ol>
<li>tilted ellipse $ x^TAx $</li>
<li>lined - up ellipse $ X^T\Lambda X = 1 $</li>
<li>rotation matrix Q</li>
</ol>
<p>axes: eigenvectors</p>
<p>half-length: $ 1/\sqrt\lambda $</p>
<h3>6.6 Similar Matrices</h3>
<p>DEF: A similar to B (A family)</p>
<ul>
<li>$ B = M^{-1}AM $</li>
</ul>
<p>&lt;br/&gt;</p>
<p>Property:</p>
<ul>
<li>A and B have same eigenvalues</li>
<li>x a eigenvector of A and $ M^{-1}x $ eigenvector of B</li>
</ul>
<p>&lt;br/&gt;</p>
<p>Jordan Form</p>
<ul>
<li>triple eigenvalues while one eigenvector</li>
<li>J with  λ in the diagonal and 1 above</li>
<li>similar to every matrices with repeated eigenvalues  λ and one eigenvector</li>
<li>λ repeated only once than J ==  Λ</li>
<li>Jordan Block</li>
<li>make A as simple as possible while preserving essential properties</li>
</ul>
<h3>6.7 Singular Value Decomposition</h3>
<p>SUMMARY</p>
<p>$ A = U \Sigma V^T $</p>
<p>$ \Sigma^2 = \Lambda $ (of  $ A^TA $ and $ AA^T $ )</p>
<p>$ U = Q $  (of $ AA^T $ in $ R^m $)</p>
<p>$ V = Q $  (of $ A^TA $ in $ R^n $)</p>
<p>&lt;br/&gt;</p>
<p>orthonormal basis of row space {$ v_1, v_2, ... v_r $}</p>
<p>orthonormal basis of null space{ $ v_{r+1}, v_{r+2},...v_n $}</p>
<p>orthonormal basis of column space{ $ u_1, u_2,...u_r $}</p>
<p>orthonormal basis of left null space { $ u_{r+1}, u_{r+2}, ... u_m $}</p>
<p>&lt;br/&gt;</p>
<p>Rotation -- Stretch -- Rotation</p>
<p><img src="https://cdn.goushi.me/wp-content/uploads/2017/02/The-Geometry-of-the-SVD.png" alt="em"></p>
<p>$ Av_1 = \sigma_1u_1 $ ...</p>
<p>so $ AV = U\Sigma $</p>
<p>(m * n) * (n * n) = (m * m)* (m * n)</p>
<p>$ V $ and $ U $ are orthogonal matrices</p>
<p>$ \Sigma $  = ( old r*r $ \Sigma $ ) + (m-r zero rows) + ( n-r zero columns )</p>
<p>therefore ...</p>
<p>&lt;br/&gt;</p>
<p>when A positive definite symmetric</p>
<p>$ A = U \Sigma V^T = Q\Lambda Q^{T} $</p>
<h3>7.3 Diagonalization and the Pseudoinverse</h3>
<p>change bases</p>
<p>$ \Lambda <em>{ w -- w } = S^{-1}</em>{std -- w} A_{std} S_{ w -- std } $</p>
<p>$ \Sigma <em>{ v -- u } = U^{-1}</em>{std -- u} A{std}V{v -- std} $</p>
<p>Polar Decomposition</p>
<p>orthogonal and semidefinite</p>
<p>rotation and stretching</p>
<p>$ A = U\Sigma V^T = ( UV^T ) (V \Sigma V^T) = QH $</p>
<p>Pseudoinverse</p>
<p>$ A^+ = V\Sigma^+ U^T $</p>
<p><img src="https://raw.githubusercontent.com/Aria461863631/MarkdownPic/master/Screenshot%20from%202017-12-16%2020-13-46.png" alt="r-&amp;gt;c"></p>
<p><img src="https://cdn.goushi.me/wp-content/uploads/2017/02/The-Big-Picture-of-Pseudoinverse.png" alt="c-&amp;gt;r"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/10/ACM/kuangbin-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aria">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Aria">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/10/ACM/kuangbin-4/" itemprop="url">kuangbin专题四 最短路</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-10T21:58:45+08:00">
                2017-12-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/12/10/ACM/kuangbin-4/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/12/10/ACM/kuangbin-4/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3>kuangbin专题四 最短路</h3>
<p>ACM图论存图方式</p>
<p>http://jzqt.github.io/2015/07/21/ACM%E5%9B%BE%E8%AE%BA%E4%B9%8B%E5%AD%98%E5%9B%BE%E6%96%B9%E5%BC%8F/</p>
<h3>单源最短路</h3>
<h4>Dijkstra</h4>
<p>​	$ O(V^2 + E) $</p>
<p>&lt;!-- more --&gt;
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
<span class="line">9</span>
<span class="line">10</span>
<span class="line">11</span>
<span class="line">12</span>
<span class="line">13</span>
<span class="line">14</span>
<span class="line">15</span>
<span class="line">16</span>
<span class="line">17</span>
<span class="line">18</span>
<span class="line">19</span>
<span class="line">20</span>
<span class="line">21</span>
<span class="line">22</span>
<span class="line">23</span>
<span class="line">24</span>
<span class="line">25</span>
<span class="line">26</span>
<span class="line">27</span>
<span class="line">28</span>
<span class="line">29</span>
<span class="line">30</span>
</pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> edg[ N ][ N ]; <span class="comment">// weight of each edge</span></span>
<span class="line"><span class="keyword">int</span> dis[ N ];      <span class="comment">// distance of each node from source</span></span>
<span class="line"><span class="keyword">bool</span> vis[ N ];     <span class="comment">// SET S represent for nodes already visited</span></span>
<span class="line"></span>
<span class="line"><span class="comment">// CLRS 24.3</span></span>
<span class="line"><span class="comment">// s:start point,  n: total number of nodes</span></span>
<span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dijkstra</span> <span class="params">( <span class="keyword">int</span> s, <span class="keyword">int</span> n )</span> </span>&#123;</span>
<span class="line">    <span class="comment">// INITIALIZE-SINGLE-SOURCE</span></span>
<span class="line">    <span class="built_in">memset</span> ( vis, <span class="literal">false</span>, <span class="keyword">sizeof</span> ( vis ) );</span>
<span class="line">    vis[ s ] = <span class="literal">true</span>;</span>
<span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i )</span>
<span class="line">        dis[ i ] = edg[ s ][ i ];</span>
<span class="line">    dis[ s ] = <span class="number">0</span>;</span>
<span class="line"></span>
<span class="line">    <span class="comment">// Extract Min</span></span>
<span class="line">    <span class="comment">// u for the node, mi for dis[ u ]</span></span>
<span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n - <span class="number">1</span>; ++i ) &#123;</span>
<span class="line">        <span class="keyword">int</span> u = <span class="number">-1</span>, mi = INF;</span>
<span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j )</span>
<span class="line">            <span class="keyword">if</span> ( !vis[ j ] &amp;&amp; dis[ j ] &lt; mi )</span>
<span class="line">                mi = dis[ u = j ];</span>
<span class="line"></span>
<span class="line">        vis[ u ] = <span class="literal">true</span>;</span>
<span class="line"></span>
<span class="line">        <span class="comment">// Relax edges adjacent to u</span></span>
<span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j )</span>
<span class="line">            <span class="keyword">if</span> ( !vis[ j ] )</span>
<span class="line">                dis[ j ] = min ( dis[ j ], dis[ u ] + edg[ u ][ j ] );</span>
<span class="line">    &#125;</span>
<span class="line">&#125;</span>
</pre></td></tr></table></figure></p>
<h4>Dijkstra + STL priority_queue</h4>
<p>​	$ O((V+E)lgV) $</p>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
<span class="line">9</span>
<span class="line">10</span>
<span class="line">11</span>
<span class="line">12</span>
<span class="line">13</span>
<span class="line">14</span>
<span class="line">15</span>
<span class="line">16</span>
<span class="line">17</span>
<span class="line">18</span>
<span class="line">19</span>
<span class="line">20</span>
<span class="line">21</span>
<span class="line">22</span>
<span class="line">23</span>
<span class="line">24</span>
<span class="line">25</span>
<span class="line">26</span>
<span class="line">27</span>
<span class="line">28</span>
<span class="line">29</span>
<span class="line">30</span>
<span class="line">31</span>
<span class="line">32</span>
<span class="line">33</span>
<span class="line">34</span>
<span class="line">35</span>
<span class="line">36</span>
<span class="line">37</span>
<span class="line">38</span>
<span class="line">39</span>
<span class="line">40</span>
<span class="line">41</span>
</pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> head[ N ]; <span class="comment">//链式前向星建图</span></span>
<span class="line"><span class="keyword">int</span> dis[ N ];  <span class="comment">// distance of each node from source</span></span>
<span class="line"><span class="keyword">bool</span> vis[ N ]; <span class="comment">// SET S represent for nodes already visited</span></span>
<span class="line"></span>
<span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span>
<span class="line">    <span class="keyword">int</span> u, d; <span class="comment">// id, dis</span></span>
<span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt; ( <span class="keyword">const</span> Node &amp;rhs ) <span class="keyword">const</span> &#123; <span class="keyword">return</span> d &gt; rhs.d; &#125;</span>
<span class="line">&#125;;</span>
<span class="line"></span>
<span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span>
<span class="line">    <span class="keyword">int</span> u, v, w, nex;</span>
<span class="line">&#125; edg[ N ];</span>
<span class="line"></span>
<span class="line"><span class="comment">// CLRS 24.3</span></span>
<span class="line"><span class="comment">// s:start point</span></span>
<span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dijkstra</span> <span class="params">( <span class="keyword">int</span> s )</span> </span>&#123;</span>
<span class="line">    priority_queue&lt;Node&gt; Q;</span>
<span class="line">    dis[ s ] = <span class="number">0</span>;</span>
<span class="line">    Q.push ( ( Node )&#123;s, dis[ s ]&#125; );</span>
<span class="line">    <span class="keyword">while</span> ( !Q.empty () ) &#123;</span>
<span class="line">        <span class="comment">// u = Extract_Min( Q )</span></span>
<span class="line">        Node x = Q.top ();</span>
<span class="line">        Q.pop ();</span>
<span class="line">        <span class="keyword">int</span> u = x.u;</span>
<span class="line"></span>
<span class="line">        <span class="keyword">if</span> ( vis[ u ] )</span>
<span class="line">            <span class="keyword">continue</span>;</span>
<span class="line">        vis[ u ] = <span class="literal">true</span>;</span>
<span class="line"></span>
<span class="line">        <span class="comment">// for each vertex v in G.adj[ u ]</span></span>
<span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = head[ u ]; i != <span class="number">-1</span>; i = edg[ i ].nex ) &#123;</span>
<span class="line">            <span class="keyword">int</span> v = edg[ i ].v;</span>
<span class="line">            <span class="keyword">int</span> w = edg[ i ].w;</span>
<span class="line">            <span class="comment">// relax</span></span>
<span class="line">            <span class="keyword">if</span> ( dis[ v ] &gt; dis[ u ] + w ) &#123;</span>
<span class="line">                dis[ v ] = dis[ u ] + w;</span>
<span class="line">                Q.push ( ( Node )&#123;v, dis[ v ]&#125; );</span>
<span class="line">            &#125;</span>
<span class="line">        &#125;</span>
<span class="line">    &#125;</span>
<span class="line">&#125;</span>
</pre></td></tr></table></figure></p>
<h4>SPFA (Shortest Path Faster Algorithm)</h4>
<p>​	$ O(kE) $ ( k &lt; 2 )</p>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
<span class="line">9</span>
<span class="line">10</span>
<span class="line">11</span>
<span class="line">12</span>
<span class="line">13</span>
<span class="line">14</span>
<span class="line">15</span>
<span class="line">16</span>
<span class="line">17</span>
<span class="line">18</span>
<span class="line">19</span>
<span class="line">20</span>
<span class="line">21</span>
<span class="line">22</span>
<span class="line">23</span>
<span class="line">24</span>
<span class="line">25</span>
<span class="line">26</span>
<span class="line">27</span>
<span class="line">28</span>
<span class="line">29</span>
<span class="line">30</span>
<span class="line">31</span>
<span class="line">32</span>
<span class="line">33</span>
<span class="line">34</span>
<span class="line">35</span>
<span class="line">36</span>
<span class="line">37</span>
<span class="line">38</span>
<span class="line">39</span>
<span class="line">40</span>
<span class="line">41</span>
<span class="line">42</span>
<span class="line">43</span>
<span class="line">44</span>
<span class="line">45</span>
<span class="line">46</span>
<span class="line">47</span>
<span class="line">48</span>
</pre></td><td class="code"><pre><span class="line"></span>
<span class="line"><span class="keyword">int</span> dis[ N ];  <span class="comment">// distance of each node from source</span></span>
<span class="line"><span class="keyword">bool</span> vis[ N ]; <span class="comment">// SET S represent for nodes already visited</span></span>
<span class="line"><span class="keyword">int</span> cnt[ N ];  <span class="comment">//入列次数超过n，有负环</span></span>
<span class="line"><span class="keyword">int</span> head[ N ]; <span class="comment">//链式前向星</span></span>
<span class="line"></span>
<span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edg</span> &#123;</span></span>
<span class="line">    <span class="keyword">int</span> u, v, w, nex;</span>
<span class="line">&#125; edg[ N ];</span>
<span class="line"></span>
<span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">SPFA</span> <span class="params">( <span class="keyword">int</span> s, <span class="keyword">int</span> n )</span> </span>&#123;</span>
<span class="line">    <span class="comment">// INIT</span></span>
<span class="line">    <span class="built_in">memset</span> ( vis, <span class="literal">false</span>, <span class="keyword">sizeof</span> ( vis ) );</span>
<span class="line">    vis[ s ] = <span class="literal">true</span>;</span>
<span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i )</span>
<span class="line">        dis[ i ] = INF;</span>
<span class="line">    dis[ s ] = <span class="number">0</span>;</span>
<span class="line">    <span class="built_in">memset</span> ( cnt, <span class="number">0</span>, <span class="keyword">sizeof</span> ( cnt ) );</span>
<span class="line">    cnt[ s ] = <span class="number">1</span>;</span>
<span class="line"></span>
<span class="line">    <span class="comment">// BFS方式的spfa</span></span>
<span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; Q;</span>
<span class="line">    Q.push ( s );</span>
<span class="line"></span>
<span class="line">    <span class="keyword">while</span> ( !Q.empty () ) &#123;</span>
<span class="line">        <span class="keyword">int</span> u = Q.front ();</span>
<span class="line">        Q.pop ();</span>
<span class="line">        vis[ u ] = <span class="literal">false</span>; <span class="comment">// 出队要取消标记</span></span>
<span class="line"></span>
<span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = head[ u ]; i != <span class="number">-1</span>; i = edg[ i ].nex ) &#123;</span>
<span class="line">            <span class="keyword">int</span> v = edg[ i ].v;</span>
<span class="line">            <span class="comment">// Relax所有出边</span></span>
<span class="line">            <span class="keyword">if</span> ( dis[ v ] &gt; dis[ u ] + edg[ i ].w ) &#123;</span>
<span class="line">                dis[ v ] = dis[ u ] + edg[ i ].w;</span>
<span class="line">                <span class="comment">//没入队的标记并入队</span></span>
<span class="line">                <span class="keyword">if</span> ( !vis[ v ] ) &#123;</span>
<span class="line">                    vis[ v ] = <span class="literal">true</span>;</span>
<span class="line">                    Q.push ( v );</span>
<span class="line">                    <span class="comment">// 判断负环</span></span>
<span class="line">                    <span class="keyword">if</span> ( ++cnt[ v ] &gt; n )</span>
<span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span>
<span class="line">                &#125;</span>
<span class="line">            &#125;</span>
<span class="line">        &#125;</span>
<span class="line">    &#125;</span>
<span class="line"></span>
<span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span>
<span class="line">&#125;</span>
</pre></td></tr></table></figure></p>
<p>贴一个dfs的，自己没写过，感觉dijkstra+heap最好</p>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
<span class="line">9</span>
<span class="line">10</span>
<span class="line">11</span>
<span class="line">12</span>
<span class="line">13</span>
<span class="line">14</span>
<span class="line">15</span>
<span class="line">16</span>
</pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">spfa_dfs</span> <span class="params">( <span class="keyword">int</span> u )</span> </span>&#123;</span>
<span class="line">    vis[ u ] = <span class="literal">true</span>;</span>
<span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = head[ u ]; i != <span class="number">-1</span>; i = edg[ i ].nex ) &#123;</span>
<span class="line">        <span class="keyword">int</span> v = edg[ i ].v, w = edg[ i ].w;</span>
<span class="line">        <span class="keyword">if</span> ( dis[ u ] + w &lt; dis[ v ] ) &#123;</span>
<span class="line">            dis[ v ] = dis[ u ] + w;</span>
<span class="line">            <span class="keyword">if</span> ( !vis[ v ] ) &#123;</span>
<span class="line">                <span class="keyword">if</span> ( spfa_dfs ( v ) )</span>
<span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span>
<span class="line">            &#125; <span class="keyword">else</span></span>
<span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span>
<span class="line">        &#125;</span>
<span class="line">    &#125;</span>
<span class="line">    vis[ u ] = <span class="literal">false</span>;</span>
<span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span>
<span class="line">&#125;</span>
</pre></td></tr></table></figure></p>
<h4>Bellman-Ford</h4>
<p>​	$ O(VE) $</p>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
<span class="line">9</span>
<span class="line">10</span>
<span class="line">11</span>
<span class="line">12</span>
<span class="line">13</span>
<span class="line">14</span>
<span class="line">15</span>
<span class="line">16</span>
<span class="line">17</span>
<span class="line">18</span>
<span class="line">19</span>
<span class="line">20</span>
<span class="line">21</span>
<span class="line">22</span>
<span class="line">23</span>
<span class="line">24</span>
<span class="line">25</span>
<span class="line">26</span>
<span class="line">27</span>
<span class="line">28</span>
<span class="line">29</span>
<span class="line">30</span>
<span class="line">31</span>
<span class="line">32</span>
<span class="line">33</span>
</pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> dis[ N ];  <span class="comment">// distance of each node from source</span></span>
<span class="line"><span class="keyword">bool</span> vis[ N ]; <span class="comment">// SET S represent for nodes already visited</span></span>
<span class="line"></span>
<span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edg</span> &#123;</span></span>
<span class="line">    <span class="keyword">int</span> u, v, w;</span>
<span class="line">&#125; edg[ N ];</span>
<span class="line"></span>
<span class="line"><span class="comment">//CLRS 24.1</span></span>
<span class="line"><span class="comment">//对每个点，relax所有的边</span></span>
<span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Bellman_Ford</span> <span class="params">( <span class="keyword">int</span> n, <span class="keyword">int</span> e, <span class="keyword">int</span> s, <span class="keyword">double</span> num )</span> </span>&#123;</span>
<span class="line">    <span class="comment">// Initialize Single Sorce( G,s )</span></span>
<span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i )</span>
<span class="line">        dis[ i ] = <span class="number">0</span>;</span>
<span class="line">    dis[ s ] = num;</span>
<span class="line"></span>
<span class="line">    <span class="comment">// for i = 1 to |G.V|-1</span></span>
<span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; ++i ) &#123;</span>
<span class="line">        <span class="comment">// for each edg ( u,v ) in G.E</span></span>
<span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> j = <span class="number">0</span>; j &lt; e; ++j ) &#123;</span>
<span class="line">            <span class="keyword">int</span> u = edg[ j ].u;</span>
<span class="line">            <span class="keyword">int</span> v = edg[ j ].v;</span>
<span class="line">            <span class="comment">// Relax</span></span>
<span class="line">            <span class="keyword">if</span> ( dis[ v ] &gt; dis[ u ] + edg[ j ].w ) &#123;</span>
<span class="line">                dis[ v ] = dis[ u ] + edg[ u ].w;</span>
<span class="line">            &#125;</span>
<span class="line">        &#125;</span>
<span class="line">    &#125;</span>
<span class="line">    <span class="comment">// 存在负环</span></span>
<span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; e; ++i )</span>
<span class="line">        <span class="keyword">if</span> ( dis[ edg[ i ].v ] &gt; ( dis[ edg[ i ].u ] - edg[ i ].w ) )</span>
<span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span>
<span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span>
<span class="line">&#125;</span>
</pre></td></tr></table></figure></p>
<h4>适用场景</h4>
<p>如果是稠密图，Dijkstra+heap比SPFA快。稀疏图则SPFA更快。再就是SPFA可以判断负环</p>
<p>对于极端的链状图，SPFA无疑是最合适的了。每个结只进队一次，标准的O(E)。</p>
<p>朴素的dijkstra对于这样的图就力不从心了：每次循环都过一遍结点，在松弛，然后发现每次O(V)的时间只松弛了一个点。</p>
<p>​</p>
<h4>多源最短路</h4>
<h4>Floyd</h4>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
<span class="line">9</span>
<span class="line">10</span>
<span class="line">11</span>
<span class="line">12</span>
<span class="line">13</span>
<span class="line">14</span>
</pre></td><td class="code"><pre><span class="line"><span class="comment">// CLRS 25.2 All-Pairs-Shortest-Path</span></span>
<span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Floyd</span> <span class="params">()</span> </span>&#123;</span>
<span class="line">    <span class="comment">// Dp</span></span>
<span class="line">    <span class="comment">// 表示所有点只经过集合&#123; 1..k &#125;内的点时的最短路径</span></span>
<span class="line">    <span class="comment">// 只经过1的时候relax一次，在添加上经过2后的relax，最后一直到n</span></span>
<span class="line">    <span class="keyword">for</span> ( <span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= n; ++k ) &#123;</span>
<span class="line">        <span class="comment">//选取每一个起点</span></span>
<span class="line">        <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i )</span>
<span class="line">            <span class="comment">//选取每一个终点</span></span>
<span class="line">            <span class="keyword">for</span> ( <span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j )</span>
<span class="line">                <span class="comment">// d(ij)^k = min &#123; d(ik)^(k-1) + d(kj)^(k-1) &#125;</span></span>
<span class="line">                dis[ i ][ j ] = dis[ i ][ j ] || ( dis[ i ][ k ] &amp;&amp; dis[ k ][ j ] );</span>
<span class="line">    &#125;</span>
<span class="line">&#125;</span>
</pre></td></tr></table></figure></p>
<h4>题目列表</h4>
<p><strong>A - Til the Cows Come Home POJ-2387</strong></p>
<blockquote>
<p>一个农场有n (1000)个点，有t (2000)条道路连接,  从n到1最短</p>
</blockquote>
<p>dijkstra 模板</p>
<p><strong>B - Frogger POJ-2253</strong></p>
<blockquote>
<p>无向图一条1~2的路径使得该路径上的最大边权最小. (max Route weight is the minimum among all routes)</p>
</blockquote>
<p>dijkstra变形 double minimax = max ( mi, v[ j ][ u ] );</p>
<p><strong>C - Heavy Transportation  POJ - 1797</strong></p>
<blockquote>
<p>​	有n个城市，n个城市之间有m条公路或桥梁，每个公路或桥都有一个最大载重量，问从城市1到城市n所能运送到货物到最大重量是多少 ( min Route weight is the maximum among all routes )</p>
</blockquote>
<p>dijkstra变形  int maxmini = min ( mi, v[ j ][ u ] );</p>
<p><strong>D - Silver Cow Party POJ - 3268</strong></p>
<blockquote>
<p>n个农场，m条单向路，n个牛分别在n个农场，第x农场为终点，问每个牛从所在农场前往x农场的往返路程最小值是多少，求出n个牛中最短路上往返路程的最大的那个</p>
</blockquote>
<p>从n个点到1再从1回到n个点，通过调转边的方向两次dijkstra</p>
<p><strong>E - Currency Exchange POJ - 1860</strong></p>
<blockquote>
<p>有n种货币，你含有num面额的其中一种货币。求有没有可能，在多次兑换后你手中的货币大于num。</p>
</blockquote>
<p>求最大路径，反向用Bellman-Ford</p>
<p><strong>F - Wormholes POJ - 3259</strong></p>
<blockquote>
<p>农场之间有很多条路，以及单向的虫洞，每条路走完会花费一定的时间，而虫洞可以回到之前的时间，问农场主是否能回到自己出发时间前的出发点</p>
</blockquote>
<p>SPFA判断负环</p>
<p><strong>G - MPI Maelstrom POJ - 1502</strong></p>
<blockquote>
<p>从第一个点出发，求到其他点最短路的最大值</p>
</blockquote>
<p>dijkstra 注意下三角矩阵邻接表的建图</p>
<p><strong>H - Cow Contest POJ - 3660</strong></p>
<blockquote>
<p>n个牛进行比赛，现已知m个关系， 牛u可以胜过牛v。问最后可以确定排名位数的有几个牛.</p>
</blockquote>
<p>Floyd判断两两牛之间的关系。如果一个牛可以胜过a个牛，b个牛可以胜过它，那么如果a＋b＝n－1，他的排名就可以确定</p>
<p><strong>I - Arbitrage POJ - 2240</strong></p>
<blockquote>
<p>给定多种货币之间的兑换关系，问是否可以套利</p>
</blockquote>
<p>Bellman-Ford判断正环（要返回自己所以松弛n次)</p>
<p>floyd判断回来后是否&gt;1</p>
<p><strong>J - Invitation Cards POJ - 1511</strong></p>
<blockquote>
<p>求源点到各点的往返最短路之和</p>
</blockquote>
<p>邻接表逆置（建了两个邻接表）</p>
<p>数据多需要优化SPFA/dijkstra+heap</p>
<p><strong>K - Candies POJ - 3159</strong></p>
<blockquote>
<p>给n个人分糖果，m组数据a，b，c；意思是a比b少的糖果个数绝对不超过c个，也就是d(b)-d(a) &lt; c，求1比n少的糖果数的最大值。</p>
</blockquote>
<p>差分约束，和最短路的松弛一样</p>
<p>数据多，dijkstra+heap</p>
<p><strong>L - Subway POJ - 2502</strong></p>
<blockquote>
<p>小明步行的速度是10km/h，地铁速度是40km/h，给定家和学校的坐标，再给定多条地铁线路站点的坐标，问小明从家到学校所需的最短时间</p>
</blockquote>
<p>dijkstra，建图连接所有的点并赋值时间</p>
<p><strong>M - 昂贵的聘礼 POJ - 1062</strong></p>
<blockquote>
<p>每个人可能有直接购买或者交换物品换取折扣这两种方式交易（交换物品要从别人手里买）</p>
<p>等级差之间超过m的不能交易</p>
<p>求用最少的钱买到非洲大酋长的承诺</p>
</blockquote>
<p>等级限制采用枚举的方法，分别从lv[ 1 ] - m ~~ lv[ 1 ] + m，每次枚举的区间长度为m,一共m次最短路搜索</p>
<p><strong>N - Tram POJ - 1847</strong></p>
<blockquote>
<p>电动巴士在每个十字路口有一个默认方向，走向别的方向需要改动扳手。</p>
</blockquote>
<p>dijkstra 每个边初始化为INF,要切换的路 = 1,不用切换 = 0</p>
<p><strong>O - Extended Traffic LightOJ - 1074</strong></p>
<blockquote>
<p>给定每条街的拥挤度p(x)，街a到街b的时间就是(p(b)-p(a))**3，求第一个点到第k个点的最短路</p>
</blockquote>
<p>SPFA判断负环</p>
<p>dfs记录负环里的点</p>
<p><strong>P - The Shortest Path in Nya Graph HDU - 4725</strong></p>
<blockquote>
<p>共n个点，n层(每个点单独一层)，相邻的两层之间权值为w</p>
<p>还有m条额外的边，权值为v，求1到n的最短路</p>
</blockquote>
<p>建图 ！！给每个点两个辅助点，一个做出度，一个做入度</p>
<p><strong>Q - Marriage Match IV HDU - 3416</strong></p>
<p>网络流，不会qwq</p>
<p><strong>R - 0 or 1 HDU - 4370</strong></p>
<blockquote>
<p>X12+X13+...X1n=1,X1n+X2n+...Xn-1n=1,其余行列和相同，求ΣCij*Xij</p>
</blockquote>
<p>神一样的建图！！节点1的出度为1.节点n的入度为1.节点2-n-1的入度和出度相等.</p>
<p>问题就相当于求一条最短路，从节点1出发，到节点N.</p>
<p>同时节点1的一个最小环+节点n的一个最小环也是可行解，两者取最小</p>
<p><strong>S - Layout POJ - 3169</strong></p>
<blockquote>
<p>两点间可能&lt;= x 或者&gt;=x，求1--&gt;n最大</p>
</blockquote>
<p>差分约束，和最短路一样，SPFA判断负环则代表不存在可行解</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.png"
                alt="Aria" />
            
              <p class="site-author-name" itemprop="name">Aria</p>
              <p class="site-description motion-element" itemprop="description">This guy is so lazy that he left nothing</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/yourname" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="xukundalian@qq.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>

    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Aria</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.3</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i> 访问人数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i> 总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

   

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  

    
      <script id="dsq-count-scr" src="https://aria-3.disqus.com/count.js" async></script>
    

    

  

















  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>


